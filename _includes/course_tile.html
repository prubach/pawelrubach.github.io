{%- comment -%}
_course_tile.html
Assumes course is passed in as "course"
{%- endcomment -%}

{% assign base_url = "" %}
{% if course.institution == "SGH" %}
  {% assign base_url = "https://usosweb.sgh.waw.pl/kontroler.php?_action=katalog2/przedmioty/pokazPrzedmiot&prz_kod=" | append: course.id | append: "-D" %}
{% elsif course.institution == "MiMUW" %}
  {% assign base_url = "https://informatorects.uw.edu.pl/pl/courses/view?prz_kod=" | append: course.id %}
{% endif %}

<a class="course-card
       {% if course.institution == "MiMUW" %}mimuw{% endif %}"
   href="{{ base_url }}" target="_blank" aria-label="Course: {{ course.name }}">

   <!-- rest of the content remains the same -->
<!--
<a class="course-card" href="{{ base_url }}" target="_blank">
-->

  <!-- Institution logo (top-left) -->
  {% if course.institution == "SGH" %}
    <img class="course-logo" src="{{ '/assets/images/logos/sgh.png' | relative_url }}" alt="SGH logo">
  {% elsif course.institution == "MiMUW" %}
    <img class="course-logo" src="{{ '/assets/images/logos/mimuw.png' | relative_url }}" alt="MiM UW logo">
  {% else %}
    <svg class="course-logo" viewBox="0 0 40 40" aria-hidden="true" focusable="false"
         style="width:40px;height:40px;position:absolute;top:10px;left:10px;">
      <rect x="0" y="0" width="40" height="40" rx="6" fill="#e6eef8"></rect>
      <text x="50%" y="55%" text-anchor="middle" font-size="14" fill="#6b7280" font-family="sans-serif">?</text>
    </svg>
  {% endif %}

  <!-- Language flag (top-right) -->
  {% if course.language == "PL" %}
    <span class="course-flag">ðŸ‡µðŸ‡±</span>
  {% elsif course.language == "EN" %}
    <span class="course-flag">ðŸ‡¬ðŸ‡§</span>
  {% endif %}

  <!-- Title + Icon -->
  <div class="course-title-wrapper">
    <!--<div class="course-icon">{{ course.icon }}</div>-->
    <div class="course-title">{{ course.name }}</div>
    <!-- ID -->
    <div class="course-id">{{ course.id }}</div>
  </div>

  <!-- Badges -->
  <div class="course-meta">
    <!--{% if course.status == "current" %}
      <span class="badge badge-current">Current</span>
    {% endif %}-->
    <span class="badge badge-years">{{ course.years }}</span>
    <span class="badge badge-{{ course.category }}">
      {% if course.category == "teaching_coordination" %}
        Teach + Coord
      {% else %}
        {{ course.category | capitalize }}
      {% endif %}
    </span>
    <span class="badge badge-level">{{ course.level | capitalize }}</span>
    {% if course.original %}
      <span class="badge badge-original">Authored</span>
    {% endif %}
  </div>

</a>
